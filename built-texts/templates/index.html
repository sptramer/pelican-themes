{% extends "base.html" %}
{% block content_title %}{% endblock %}
{% block content %}

{% if articles %}
{% for article in articles_page.object_list %}        
    <div class='row-fluid'>
        <div class="article-title span9">
            <a href="{{ SITEURL }}/{{ article.url }}"><h1>{{ article.title }}</h1></a>
        </div>
    </div>
    <div class="row-fluid">
      <div class="span2">
	{% include "article-sidebar.html" %}
      </div>
  {% if loop.first and not articles_page.has_previous() %}
    {# Prefer the abstract to full content #}
    {% if article.abstractparagraphs %}
      <div class="summary span8">
      {% for line in article.content.splitlines() %}
      {% if loop.index0 < (article.abstractparagraphs|int) %}{{line}}{% endif %}
      {% endfor %}
      <a class="read-more" href="{{ SITEURL }}/{{ article.url }}">Read more &gt;&gt;</a><br/>
        <hr/>
      </div>
    {% else %}
      <div class="article-content span8">
      	{{ article.content }} 
        {% if DISQUS_SITENAME %}
      	<a class="btn btn-mini xsmall" href="{{ SITEURL }}/{{ article.url }}">
                <i class="icon-comment"></i> Comment </a>
      	<hr />
        {% endif %}
      </div>
    {% endif %}
  {% else %}
    <div class="summary span8">
    {% if article.abstractparagraphs %}
    {% for line in article.content.splitlines() %}
      {% if loop.index0 < (article.abstractparagraphs|int) %}{{line}}{% endif %}
    {% endfor %}
    {% else %}
    {{ article.summary }} 
    {% endif %}
    <a class="read-more" href="{{ SITEURL }}/{{ article.url }}">Read more &gt;&gt;</a><br/>
      <hr/>
    </div>
  {% endif %}
      
    </div>
    
    {% if (loop.first and loop.length == 1) or (loop.last and (articles_page.has_previous() or not articles_page.has_previous() and loop.length > 1)) %}
        {% include 'pagination.html' %}
    {% endif %}
{% endfor %} {# For article #}
{% endif %} {# If articles #}

{% endblock content %}

{% block summary %}
{% endblock summary %}